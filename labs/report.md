---
## Front matter
title: "Отчёт по лабораторной работе №10"
subtitle: "Основы работы с модулями ядра операционной системы"
author: "Наурузова Айшат Магометовна"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки работы с утилитами управления модулями ядра операционной системы.

# Ход выполнения

## Управление модулями ядра из командной строки

После входа в систему были получены права администратора.  
Выполнен просмотр подключённых устройств и связанных с ними модулей ядра с помощью команды `lspci -k`.  
Команда вывела список всех устройств, включая сетевые, графические, USB и звуковые адаптеры. Для каждого устройства указаны загруженные драйверы ядра и модули, обеспечивающие их работу.  
Например, для сетевого контроллера Intel PRO/1000 MT Desktop Adapter используется модуль e1000, а для видеокарты — vmwgfx.  

![Вывод команды lspci -k](01.png){ #fig:001 width=70% }

Для отображения всех загруженных модулей ядра была выполнена команда `lsmod | sort`.  
Результат показал множество модулей, загруженных в систему, включая e1000, vmwgfx, snd_intel8x0, ata_piix и другие. Это свидетельствует о корректной работе драйверов для устройств, установленных в системе.  

![Список загруженных модулей ядра](02.png){ #fig:002 width=70% }

Для проверки, загружен ли модуль файловой системы ext4, использовалась команда `lsmod | grep ext4`.  
Модуль не был найден, поэтому был выполнен его запуск с помощью `modprobe ext4`.  
После повторной проверки модуль успешно появился в списке.  

![Загрузка и проверка модуля ext4](03.png){ #fig:003 width=70% }

Информация о модуле была получена с помощью `modinfo ext4`.  
Были выведены сведения о местоположении модуля, лицензии GPL, авторах (Remy Card, Stephen Tweedie и др.), а также зависимостях jbd2 и mbcache.  
Отмечено, что модуль не имеет параметров настройки.  

Для удаления модуля ext4 была выполнена команда `modprobe -r ext4`.  
Модуль выгружен без ошибок. Однако при попытке выгрузить модуль xfs система выдала сообщение об ошибке «FATAL: Module xfs is in use», что означает, что модуль используется файловой системой и не может быть удалён.  

![Выгрузка модулей ext4 и xfs](04.png){ #fig:004 width=70% }

## Загрузка модулей ядра с параметрами

Для проверки наличия модуля Bluetooth использовалась команда `lsmod | grep bluetooth`.  
Модуль отсутствовал, после чего он был загружен при помощи `modprobe bluetooth`.  
Повторная проверка показала, что модуль bluetooth успешно активирован.  

![Загрузка модуля bluetooth](05.png){ #fig:005 width=70% }

Информация о модуле получена с помощью `modinfo bluetooth`.  
Выведено описание — Bluetooth Core ver 2.22, лицензия GPL, автор Marcel Holtmann.  
Зависимость — модуль rfkill.  
Модуль поддерживает следующие параметры:  
- disable_esco — отключение eSCO-соединений  
- disable_ertm — отключение режима расширенной передачи  
- enable_ecred — включение улучшенного потока управления  

После проверки модуль был выгружен командой `modprobe -r bluetooth`.  

![Информация о модуле bluetooth и его выгрузка](06.png){ #fig:006 width=70% }

## Обновление ядра системы

Для проверки текущей версии ядра использовалась команда `uname -r`.  
В системе установлено ядро версии 6.12.0-55.12.1.el10_0.x86_64.  

Для просмотра доступных пакетов ядра применена команда `dnf list kernel`.  
В списке пакетов видно, что доступна более новая версия ядра — 6.12.0-55.37.1.el10_0.x86_64.  

![Проверка версии и доступных пакетов ядра](07.png){ #fig:007 width=70% }

Для обновления были выполнены команды `dnf update kernel`, `dnf update`, `dnf upgrade --refresh`.  
Система подтвердила отсутствие зависимостей и корректное завершение обновления.  

![Обновление ядра и системы](08.png){ #fig:008 width=70% }

После перезагрузки и выбора нового ядра команда `uname -r` показала, что активна версия ядра 6.12.0-55.37.1.el10_0.x86_64.  
Команда `hostnamectl` отобразила информацию о системе: дистрибутив Rocky Linux 10.0, виртуализация Oracle (VirtualBox), архитектура x86_64.  

![Проверка версии ядра и системных сведений](09.png){ #fig:009 width=70% }

# Контрольные вопросы

**1. Какая команда показывает текущую версию ядра, которая используется на вашей системе?**  
Для этого используется команда `uname -r`.  
Она выводит номер версии ядра, загруженного в данный момент.  

**2. Как можно посмотреть более подробную информацию о текущей версии ядра операционной системы?**  
Для получения детальных сведений используется команда `hostnamectl`.  
Она показывает версию ядра, архитектуру системы, производителя оборудования и виртуализацию.  

**3. Какая команда показывает список загруженных модулей ядра?**  
Для отображения всех загруженных модулей применяется команда `lsmod`.  
Она выводит список модулей с указанием их размера и количества использований.  

**4. Какая команда позволяет вам определять параметры модуля ядра?**  
Чтобы просмотреть параметры модуля, используется команда `modinfo <имя_модуля>`.  
В выводе отображаются доступные параметры, их типы и описание.  

**5. Как выгрузить модуль ядра?**  
Для выгрузки модуля используется команда `modprobe -r <имя_модуля>`.  
Она удаляет модуль из памяти, если он не используется другими процессами.  

**6. Что вы можете сделать, если получите сообщение об ошибке при попытке выгрузить модуль ядра?**  
Если система сообщает, что модуль используется, необходимо сначала остановить процесс или службу, задействующую этот модуль, либо размонтировать файловую систему, если она использует модуль.  
После этого можно повторно выполнить команду выгрузки.  

**7. Как определить, какие параметры модуля ядра поддерживаются?**  
Для этого также используется команда `modinfo <имя_модуля>`.  
В разделе *parm* указываются поддерживаемые параметры и их описание.  

**8. Как установить новую версию ядра?**  
Для установки новой версии ядра применяется пакетный менеджер `dnf`.  
Сначала выполняется обновление списка пакетов:  
`dnf upgrade --refresh`  
Затем обновление ядра:  
`dnf update kernel`  
После установки необходимо перезагрузить систему и выбрать новое ядро при старте.


# Заключение

В ходе лабораторной работы были изучены основные принципы управления модулями ядра в операционной системе Linux.  
Были рассмотрены команды для просмотра, загрузки, выгрузки и анализа модулей, такие как `lsmod`, `modprobe` и `modinfo`.  
На практике были загружены и исследованы модули файловых систем и сетевых устройств, а также выполнено обновление ядра системы до новой версии.  
